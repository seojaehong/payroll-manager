# 갭 분석: 설계와 구현의 일치율 측정

> 만들고 나면 끝? 설계대로 만들었는지 검증해야 진짜 끝.

## 갭 분석이란?

설계 문서(schema.md)와 실제 구현(코드) 사이의 차이를 분석:

- **일치**: 설계대로 구현됨
- **추가**: 설계에 없지만 구현됨 (확장)
- **누락**: 설계에 있지만 구현 안됨 (위험)
- **변경**: 설계와 다르게 구현됨

## 분석 결과 예시

```
┌────────────────────────────────────────────────┐
│             갭 분석 보고서                      │
├────────────────────────────────────────────────┤
│ 설계-구현 일치율    │  92%   │  PASS           │
│ 아키텍처 준수율     │  85%   │  PASS           │
│ 기능 완성도        │  95%   │  PASS           │
│ 코드 품질          │  80%   │  개선 필요       │
├────────────────────────────────────────────────┤
│ 전체 매치율        │  88%   │  PASS           │
└────────────────────────────────────────────────┘
```

## 데이터 모델 비교

### Business 엔티티

| 필드 | 설계 | 구현 | 일치 |
|------|------|------|:----:|
| id | string | string | O |
| name | string | string | O |
| bizNo | string | string | O |
| gwanriNo | string (N) | string? | O |
| ... | ... | ... | ... |

**일치율: 100%**

### 추가된 엔티티 (설계 외 확장)

```typescript
// MonthlyWage - 상실신고 보수 계산용
interface MonthlyWage {
  id: string;
  employmentId: string;
  yearMonth: string;
  totalWage: number;
  workDays?: number;
  createdAt: Date;
}
```

**상태**: 설계 외 확장 (정당한 사유)

## 기능 비교

### 구현 완료

| 기능 | 설계 | 구현 | 비고 |
|------|:----:|:----:|------|
| 다중 사업장 | O | O | 15개 |
| 월별 급여 입력 | - | O | 확장 |
| 상실신고 당해/전년 분리 | O | O | 완전 구현 |
| Firebase 동기화 | O | O | 완전 구현 |

### 미구현

| 기능 | 설계 | 구현 | 우선순위 |
|------|:----:|:----:|:--------:|
| WageHistory UI | O | X | 낮음 |
| Chrome 확장프로그램 | O | X | 향후 |

## 코드 품질 이슈

### 발견된 문제

| 문제 | 위치 | 심각도 |
|------|------|:------:|
| 컴포넌트 크기 과대 | businesses/[id]/page.tsx (913줄) | 중간 |
| 중복 코드 | 신고서 생성 로직 | 중간 |
| 서비스 레이어 부재 | 전체 | 낮음 |

### 권장 조치

```
app/businesses/[id]/
├── page.tsx (메인 - 100줄)
├── components/
│   ├── WorkersTab.tsx
│   ├── WagesTab.tsx
│   ├── ReportsTab.tsx
│   └── ImportTab.tsx
```

## 동기화 옵션

차이 발견 시 선택:

1. [ ] 구현을 설계에 맞게 수정
2. [x] **설계를 구현에 맞게 업데이트** (권장)
3. [ ] 둘 다 새 버전으로 통합
4. [x] **차이를 의도적 확장으로 기록**

## 결론

**88% 매치율** - 양호

- 핵심 기능 100% 구현
- 설계 외 확장 적절 (MonthlyWage)
- 주요 개선점: 코드 구조화

---

*"갭 분석은 개발 완료가 아니라 품질 보증의 시작"*
