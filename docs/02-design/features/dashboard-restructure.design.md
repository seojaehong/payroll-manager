# PDCA Design: Dashboard Restructure

> Feature: dashboard-restructure
> Created: 2026-02-04
> Status: Design Phase
> Plan Reference: `docs/01-plan/features/dashboard-restructure.plan.md`

---

## 1. ì„¤ê³„ ê°œìš”

### ëª©í‘œ
ì•± ì§„ì… ì‹œ **ì „ì²´ ì‚¬ì—…ì¥ í˜„í™©**ì„ ì¦‰ì‹œ ë³´ì—¬ì£¼ëŠ” ëŒ€ì‹œë³´ë“œ êµ¬í˜„

### í•µì‹¬ ë³€ê²½
| ì˜ì—­ | Before | After |
|------|--------|-------|
| ëŒ€ì‹œë³´ë“œ | ë‹¨ì¼ ì‚¬ì—…ì¥ (ì„ íƒ í•„ìˆ˜) | ì „ì²´ ì‚¬ì—…ì¥ ê°œìš” |
| ì‚¬ì´ë“œë°” | 7ê°œ ë©”ë‰´ | 2ê°œ ë©”ë‰´ |
| í—¤ë” | BusinessSelector | ì‹¬í”Œ íƒ€ì´í‹€ |
| ì§„ì…ì  | ì…€ë ‰í„° ì„ íƒ | ì¹´ë“œ í´ë¦­ |

---

## 2. ì»´í¬ë„ŒíŠ¸ ì„¤ê³„

### 2.1 BusinessCard ì»´í¬ë„ŒíŠ¸

**íŒŒì¼:** `src/components/ui/BusinessCard.tsx`

```typescript
interface BusinessCardProps {
  business: Business;
  stats: {
    activeWorkers: number;
    thisMonthJoins: number;
    thisMonthLeaves: number;
    wageProgress: number;      // 0-100
    pendingReports: number;    // ì‹ ê³  í•„ìš” ê±´ìˆ˜
  };
}
```

**UI êµ¬ì¡°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¢ {business.name}                       [â†’]   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  ì‚¬ì—…ìë²ˆí˜¸: {business.bizNo}                   â”‚
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ ì¬ì§    â”‚ ì…ì‚¬    â”‚ í‡´ì‚¬    â”‚               â”‚
â”‚  â”‚  12ëª…   â”‚  +2     â”‚  -1     â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                 â”‚
â”‚  ê¸‰ì—¬ ì…ë ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 85%                        â”‚
â”‚                                                 â”‚
â”‚  {pendingReports > 0 && "âš ï¸ ì‹ ê³  í•„ìš” Nê±´"}    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìŠ¤íƒ€ì¼:**
- `glass` í´ë˜ìŠ¤ ê¸°ë°˜
- hover ì‹œ `scale-[1.02]` + `shadow-lg`
- í´ë¦­ ì‹œ `/businesses/{id}` ì´ë™
- ì•Œë¦¼ ìˆì„ ë•Œ `border-l-4 border-yellow-500`

### 2.2 Dashboard í˜ì´ì§€ ì¬ì„¤ê³„

**íŒŒì¼:** `src/app/page.tsx` (ì „ì²´ ì¬ì‘ì„±)

**ë ˆì´ì•„ì›ƒ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PageHeader: "ê¸‰ì—¬ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ"                      â”‚
â”‚  description: "ì „ì²´ ì‚¬ì—…ì¥ í˜„í™©ì„ í•œëˆˆì—"             â”‚
â”‚  action: "+ ì‚¬ì—…ì¥ ì¶”ê°€" â†’ /businesses/new           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì „ì²´ í†µê³„ ê·¸ë¦¬ë“œ - 4ì¹¸]                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ì´ì‚¬ì—…ì¥â”‚ì´ì¬ì§ìâ”‚ì´ë²ˆë‹¬  â”‚ì´ë²ˆë‹¬  â”‚             â”‚
â”‚  â”‚   3    â”‚  45    â”‚ì…ì‚¬ +5 â”‚í‡´ì‚¬ -2 â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì „ì²´ ì•Œë¦¼ ì„¹ì…˜] (ì‹ ê³  í•„ìš” ì‚¬ì—…ì¥ ìˆì„ ë•Œë§Œ)        â”‚
â”‚  âš ï¸ 3ê°œ ì‚¬ì—…ì¥ì—ì„œ ì‹ ê³ ì„œ ì‘ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì‚¬ì—…ì¥ ì¹´ë“œ ê·¸ë¦¬ë“œ]                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ BusinessCardâ”‚ â”‚ BusinessCardâ”‚ â”‚ BusinessCardâ”‚   â”‚
â”‚  â”‚    Aì‚¬      â”‚ â”‚    Bì‚¬      â”‚ â”‚    Cì‚¬      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ì‚¬ì—…ì¥ ì—†ì„ ë•Œ Empty State]                       â”‚
â”‚  ğŸ“‹ ë“±ë¡ëœ ì‚¬ì—…ì¥ì´ ì—†ìŠµë‹ˆë‹¤                         â”‚
â”‚  [ì‚¬ì—…ì¥ ë“±ë¡í•˜ê¸°] ë²„íŠ¼                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë°ì´í„° ê³„ì‚°:**
```typescript
const globalStats = useMemo(() => {
  const totalBusinesses = businesses.length;
  const totalActiveWorkers = employments.filter(e => e.status === 'ACTIVE').length;

  const thisMonth = new Date().toISOString().slice(0, 7);
  const thisMonthJoins = employments.filter(
    e => e.joinDate?.startsWith(thisMonth) && e.status === 'ACTIVE'
  ).length;
  const thisMonthLeaves = employments.filter(
    e => e.leaveDate?.startsWith(thisMonth)
  ).length;

  return { totalBusinesses, totalActiveWorkers, thisMonthJoins, thisMonthLeaves };
}, [businesses, employments]);

// ê° ì‚¬ì—…ì¥ë³„ í†µê³„
const businessStats = useMemo(() => {
  return businesses.map(biz => {
    const bizEmployments = employments.filter(e => e.businessId === biz.id);
    // ... ì‚¬ì—…ì¥ë³„ í†µê³„ ê³„ì‚°
    return { business: biz, stats: { ... } };
  });
}, [businesses, employments, monthlyWages]);
```

### 2.3 Layout ì‚¬ì´ë“œë°” ê°„ì†Œí™”

**íŒŒì¼:** `src/components/Layout.tsx`

**Before (7ê°œ ë©”ë‰´):**
```typescript
const navItems = [
  { href: '/', label: 'ëŒ€ì‹œë³´ë“œ', icon: 'ğŸ“Š' },
  { href: '/workers', label: 'ê·¼ë¡œì ê´€ë¦¬', icon: 'ğŸ‘¥' },
  { href: '/wages', label: 'ê¸‰ì—¬ ê´€ë¦¬', icon: 'ğŸ’°' },
  { href: '/reports', label: 'ì‹ ê³ ì„œ ìƒì„±', icon: 'ğŸ“' },
  { href: '/payslip', label: 'ëª…ì„¸ì„œ ë°œì†¡', icon: 'ğŸ“§' },
  { href: '/import', label: 'ì—‘ì…€ Import', icon: 'ğŸ“¥' },
  { href: '/settings', label: 'ì„¤ì •', icon: 'âš™ï¸' },
];
```

**After (2ê°œ ë©”ë‰´):**
```typescript
const navItems = [
  { href: '/', label: 'ëŒ€ì‹œë³´ë“œ', icon: 'ğŸ“Š' },
  { href: '/settings', label: 'ì„¤ì •', icon: 'âš™ï¸' },
];
```

**í—¤ë” ë³€ê²½:**
- BusinessSelector ì»´í¬ë„ŒíŠ¸ ì œê±°
- ì‹¬í”Œ íƒ€ì´í‹€ ë˜ëŠ” ë¹ˆ í—¤ë”

**ì¡°ê±´ë¶€ ë Œë”ë§ ì œê±°:**
```typescript
// Before: ì‚¬ì—…ì¥ ë¯¸ì„ íƒ ì‹œ ë¹ˆ í™”ë©´
{isGlobalPage || selectedBusinessId ? children : <EmptyState />}

// After: í•­ìƒ children ë Œë”ë§ (ì¡°ê±´ ì œê±°)
{children}
```

---

## 3. ë¼ìš°íŒ… ë³€ê²½

### ê¸°ì¡´ ë¦¬ë‹¤ì´ë ‰íŠ¸ ìœ ì§€
ì´ë¯¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ íŒ¨í„´ì´ ì ìš©ëœ í˜ì´ì§€ë“¤ì€ ê·¸ëŒ€ë¡œ ìœ ì§€:

| URL | ë™ì‘ |
|-----|------|
| `/workers` | â†’ `/businesses/[selectedId]?tab=workers` |
| `/wages` | â†’ `/businesses/[selectedId]?tab=wages` |
| `/reports` | â†’ `/businesses/[selectedId]?tab=reports` |
| `/payslip` | â†’ `/businesses/[selectedId]?tab=payslip` |

### ë¬¸ì œì 
ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜ì´ì§€ë“¤ì€ `selectedBusinessId`ê°€ í•„ìš”í•œë°, ì´ì œ BusinessSelectorê°€ ì—†ìŒ.

### í•´ê²° ë°©ì•ˆ
ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜ì´ì§€ë¥¼ **ì‚¬ì—…ì¥ ë¯¸ì„ íƒ ì•ˆë‚´ í˜ì´ì§€**ë¡œ ë³€ê²½:
```typescript
// /workers/page.tsx
if (!selectedBusinessId) {
  return (
    <div>
      <p>ëŒ€ì‹œë³´ë“œì—ì„œ ì‚¬ì—…ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>
      <Link href="/">ëŒ€ì‹œë³´ë“œë¡œ ì´ë™</Link>
    </div>
  );
}
// ê¸°ì¡´ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¡œì§
```

ë˜ëŠ” ë” ê°„ë‹¨í•˜ê²Œ: **í•´ë‹¹ í˜ì´ì§€ë“¤ ì‚­ì œ** (ì‚¬ì´ë“œë°”ì—ì„œ ì œê±°ë˜ë¯€ë¡œ ì§ì ‘ ì ‘ê·¼í•  ì¼ ì—†ìŒ)

---

## 4. ìƒíƒœ ê´€ë¦¬

### selectedBusinessId ì²˜ë¦¬

**í˜„ì¬:** ì „ì—­ ìƒíƒœë¡œ ì‚¬ìš©
```typescript
// useStore
selectedBusinessId: string | null;
setSelectedBusinessId: (id: string | null) => void;
```

**ë³€ê²½ í›„:**
- ëŒ€ì‹œë³´ë“œì—ì„œëŠ” ì‚¬ìš© ì•ˆ í•¨
- ì‚¬ì—…ì¥ ìƒì„¸ í˜ì´ì§€ì—ì„œ URL paramsë¡œ ê²°ì •
- ë¦¬ë‹¤ì´ë ‰íŠ¸ í˜ì´ì§€ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ (deprecated)

---

## 5. êµ¬í˜„ ìˆœì„œ

| # | ì‘ì—… | íŒŒì¼ | ì˜ì¡´ì„± |
|---|------|------|--------|
| 1 | BusinessCard ì»´í¬ë„ŒíŠ¸ ìƒì„± | `components/ui/BusinessCard.tsx` | ì—†ìŒ |
| 2 | ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ ì¬ì‘ì„± | `app/page.tsx` | #1 |
| 3 | Layout ì‚¬ì´ë“œë°” ê°„ì†Œí™” | `components/Layout.tsx` | ì—†ìŒ |
| 4 | í—¤ë”ì—ì„œ BusinessSelector ì œê±° | `components/Layout.tsx` | #3 |
| 5 | ë¹Œë“œ í…ŒìŠ¤íŠ¸ | - | #1-4 |

---

## 6. í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ ì§„ì… ì‹œ ì „ì²´ í†µê³„ í‘œì‹œ
- [ ] ì‚¬ì—…ì¥ ì¹´ë“œ ê·¸ë¦¬ë“œ í‘œì‹œ
- [ ] ì¹´ë“œ í´ë¦­ ì‹œ `/businesses/[id]` ì´ë™
- [ ] ì‚¬ì—…ì¥ ì—†ì„ ë•Œ Empty State í‘œì‹œ
- [ ] ì•Œë¦¼ ì„¹ì…˜ ì¡°ê±´ë¶€ í‘œì‹œ

### ì‚¬ì´ë“œë°” í…ŒìŠ¤íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ, ì„¤ì • 2ê°œ ë©”ë‰´ë§Œ í‘œì‹œ
- [ ] ê° ë©”ë‰´ í´ë¦­ ì‹œ ì •ìƒ ì´ë™

### ë ˆê±°ì‹œ URL í…ŒìŠ¤íŠ¸
- [ ] `/workers` ì ‘ê·¼ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€ ë˜ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸
- [ ] `/wages` ì ‘ê·¼ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€ ë˜ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸
- [ ] `/reports` ì ‘ê·¼ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€ ë˜ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸

### ë¹Œë“œ í…ŒìŠ¤íŠ¸
- [ ] `npm run build` ì„±ê³µ
- [ ] TypeScript ì—ëŸ¬ ì—†ìŒ
- [ ] ëŸ°íƒ€ì„ ì—ëŸ¬ ì—†ìŒ

---

## 7. ë¡¤ë°± ê³„íš

ë¬¸ì œ ë°œìƒ ì‹œ:
1. `src/app/page.tsx` ì›ë³µ
2. `src/components/Layout.tsx` navItems ì›ë³µ
3. BusinessSelector ì¬í™œì„±í™”

---

## 8. ìŠ¹ì¸

| ì—­í•  | ì´ë¦„ | ë‚ ì§œ | ì„œëª… |
|------|------|------|------|
| Developer | Claude Code | 2026-02-04 | âœ… |
| Reviewer | User | - | Pending |

---

*Design created: 2026-02-04*
*PDCA Phase: Design*
